// Generated by CoffeeScript 1.9.3
(function() {
  var BBox, GlyphRun;

  BBox = require('../glyph/BBox');

  GlyphRun = (function() {
    var get;

    get = require('../get')(GlyphRun);

    function GlyphRun(glyphs, positions) {
      this.glyphs = glyphs;
      this.positions = positions;
    }

    get('advanceWidth', function() {
      var i, len, position, ref, width;
      width = 0;
      ref = this.positions;
      for (i = 0, len = ref.length; i < len; i++) {
        position = ref[i];
        width += position.xAdvance;
      }
      return width;
    });

    get('advanceHeight', function() {
      var height, i, len, position, ref;
      height = 0;
      ref = this.positions;
      for (i = 0, len = ref.length; i < len; i++) {
        position = ref[i];
        height += position.yAdvance;
      }
      return height;
    });

    get('bbox', function() {
      var b, bbox, glyph, i, index, len, p, ref, x, y;
      bbox = new BBox;
      x = 0;
      y = 0;
      ref = this.glyphs;
      for (index = i = 0, len = ref.length; i < len; index = ++i) {
        glyph = ref[index];
        p = this.positions[index];
        b = glyph.bbox;
        bbox.addPoint(b.minX + x + p.xOffset, b.minY + y + p.yOffset);
        bbox.addPoint(b.maxX + x + p.xOffset, b.maxY + y + p.yOffset);
        x += p.xAdvance;
        y += p.yAdvance;
      }
      return bbox;
    });

    return GlyphRun;

  })();

  module.exports = GlyphRun;

}).call(this);
